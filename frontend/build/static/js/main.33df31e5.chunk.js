(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{204:function(e,t,a){},233:function(e,t){},235:function(e,t){},249:function(e,t){},251:function(e,t){},279:function(e,t){},281:function(e,t){},282:function(e,t){},287:function(e,t){},289:function(e,t){},308:function(e,t){},320:function(e,t){},323:function(e,t){},340:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),r=a(36),i=a.n(r),o=a(347),l=a(26),j=a(20),d=(a(204),a(360)),b=a(348),u=a(349),h=a(356),O=a(18),x=a(100),m=a.n(x),p=function(e){if(void 0!==window)return m.a.get(e)},f=function(e,t){var a,n;a="token",n=e.data.token,void 0!==window&&m.a.set(a,n,{expires:1}),function(e,t){void 0!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},g=function(){if(void 0!==window&&p("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},v=function(e){var t;t="token",void 0!==window&&m.a.remove(t,{expires:1}),function(e){void 0!==window&&localStorage.removeItem(e)}("user"),e()},y=Object(j.o)((function(e){var t=e.history;return Object(n.jsx)("header",{children:Object(n.jsx)(d.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(n.jsxs)(o.a,{children:[Object(n.jsx)(O.LinkContainer,{to:"/",children:Object(n.jsxs)(d.a.Brand,{children:[Object(n.jsx)(b.a,{height:"50px",className:"mr-2",src:"/images/chef_hat.png"}),Object(n.jsx)("span",{className:"logo__text-chef",children:"Chef"})," ",Object(n.jsx)("span",{className:"text-warning logo__text-helper ml-2",children:"Helper"})]})}),Object(n.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsxs)(u.a,{className:"ml-auto",children:[Object(n.jsx)(O.LinkContainer,{to:"/tasks",children:Object(n.jsxs)(u.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-clipboard-list"})," Tasks"]})}),Object(n.jsx)(O.LinkContainer,{to:"/pantry",children:Object(n.jsxs)(u.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-clipboard"})," Pantry"]})}),Object(n.jsx)(O.LinkContainer,{to:"/rota",children:Object(n.jsxs)(u.a.Link,{children:[Object(n.jsx)("i",{className:"far fa-calendar-alt"})," Rota"]})}),Object(n.jsx)(O.LinkContainer,{to:"/recipes",children:Object(n.jsxs)(u.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-utensils"})," Recipes"]})}),g()?Object(n.jsxs)(h.a,{title:g().name,id:"username",children:[Object(n.jsx)(O.LinkContainer,{to:"admin"===g().role?"/admin":"/profile",children:Object(n.jsx)(h.a.Item,{children:"admin"===g().role?"Admin Tools":"Profile"})}),"admin"===g().role?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(O.LinkContainer,{to:"/admin/users",children:Object(n.jsx)(h.a.Item,{children:"Users"})}),Object(n.jsx)(O.LinkContainer,{to:"/admin/rota",children:Object(n.jsx)(h.a.Item,{children:"Rota Tools"})}),Object(n.jsx)(O.LinkContainer,{to:"/admin/recipe",children:Object(n.jsx)(h.a.Item,{children:"Recipes Tools"})})]}):null,Object(n.jsx)(h.a.Item,{onClick:function(){v((function(){t.push("/")}))},children:"Logout"})]}):Object(n.jsx)(O.LinkContainer,{to:"/login",children:Object(n.jsxs)(u.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-user"})," Login"]})})]})})]})})})})),w=a(350),k=a(196),N=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("footer",{className:"bg-light",children:Object(n.jsx)(o.a,{children:Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{className:"text-center py-3",children:Object(n.jsxs)("strong",{children:["\xa9 Chef Helper ",Object(n.jsx)("span",{className:"text-warning",children:"|"})," Pawel Karpinski ",(new Date).getFullYear()]})})})})})})},C=a(7),S=a(98),I=function(e){var t=e.component,a=Object(S.a)(e,["component"]);return Object(n.jsx)(j.d,Object(C.a)(Object(C.a)({},a),{},{render:function(e){return g()?Object(n.jsx)(t,Object(C.a)({},e)):Object(n.jsx)(j.c,{to:{pathname:"/login",state:{from:e.location}}})}}))},L=function(e){var t=e.component,a=Object(S.a)(e,["component"]);return Object(n.jsx)(j.d,Object(C.a)(Object(C.a)({},a),{},{render:function(e){return g()&&"admin"===g().role?Object(n.jsx)(t,Object(C.a)({},e)):Object(n.jsx)(j.c,{to:{pathname:"/login",state:{from:e.location}}})}}))},R=a(9),T=a.n(R),P=a(14),E=a(4),_=a(352),A=a(11),G=a.n(A),D=a(359),H=a(351);var F=function(e){var t=e.recipes;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"text-center my-3",children:"Chef's Favourite Recipes"}),Object(n.jsx)(D.a,{pause:"hover",className:"bg-dark",children:t.map((function(e){return Object(n.jsx)(D.a.Item,{children:Object(n.jsxs)(l.Link,{to:"/recipes/".concat(e._id),children:[Object(n.jsx)(b.a,{src:e.image,alt:e.label,fluid:!0}),Object(n.jsxs)(D.a.Caption,{className:"carousel-caption",children:[Object(n.jsx)("h2",{className:"text-light",children:e.label}),e.healthLabels.map((function(e,t){return Object(n.jsx)(H.a,{variant:"warning",className:"m-2 p-1",children:e},t)}))]})]})},e._id)}))})]})};var B=Object(j.o)((function(e){var t=e.history;return Object(n.jsxs)(u.a,{className:"justify-content-center",activeKey:"/home",children:[Object(n.jsx)(O.LinkContainer,{to:"/profile",children:Object(n.jsxs)(u.a.Link,{className:"text-warning",children:[Object(n.jsx)("i",{class:"fas fa-users-cog fa-2x",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{className:"text-dark",children:"Profile"})]})}),Object(n.jsx)(u.a.Item,{onClick:function(){v((function(){t.push("/")}))},children:Object(n.jsxs)(u.a.Link,{className:"text-danger",children:[Object(n.jsx)("i",{class:"fas fa-sign-out-alt fa-2x",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{children:"Logout"})]})})]})}));var U=Object(j.o)((function(e){var t=e.history;return Object(n.jsxs)(u.a,{className:"justify-content-center",activeKey:"/home",children:[Object(n.jsx)(O.LinkContainer,{to:"/admin/users",children:Object(n.jsxs)(u.a.Link,{className:"text-dark",children:[Object(n.jsx)("i",{class:"fas fa-users-cog fa-2x text-warning",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{children:"Users"})]})}),Object(n.jsx)(O.LinkContainer,{to:"/admin/recipe",children:Object(n.jsxs)(u.a.Link,{className:"text-dark",children:[Object(n.jsx)("i",{className:"fas fa-utensils fa-2x text-warning",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{children:"Recipes"})]})}),Object(n.jsx)(O.LinkContainer,{to:"/admin/rota",children:Object(n.jsxs)(u.a.Link,{className:"text-dark",children:[Object(n.jsx)("i",{className:"far fa-calendar-alt fa-2x text-warning",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{children:"Rota"})]})}),Object(n.jsx)(O.LinkContainer,{to:"/admin",children:Object(n.jsxs)(u.a.Link,{className:"text-dark",children:[Object(n.jsx)("i",{className:"fas fa-clipboard-list fa-2x text-warning",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{children:"Tasks | Pantry"})]})}),Object(n.jsx)(u.a.Item,{onClick:function(){v((function(){t.push("/")}))},children:Object(n.jsxs)(u.a.Link,{className:"text-danger",children:[Object(n.jsx)("i",{class:"fas fa-sign-out-alt fa-2x",style:{textShadow:"1px 1px 3px rgba(0,0,0,.85)"}})," ",Object(n.jsx)("strong",{className:"ml-1",children:"Logout"})]})})]})})),M=function(e){var t=new Date(e).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"});return t},z=function(e){var t=new Date(e).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return t};var q=function(e){var t=e.tasks;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h2",{className:"text-center my-4",children:[Object(n.jsx)("span",{className:"text-danger",children:"Urgent"})," jobs to do"]}),t.map((function(e){return Object(n.jsxs)(_.a,{variant:"danger",children:[Object(n.jsxs)(_.a.Heading,{className:"d-flex justify-content-between",children:[e.taskName," ",Object(n.jsx)("i",{class:"fas fa-exclamation-circle text-danger"})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("p",{className:"mb-0",children:[Object(n.jsx)("strong",{className:"text-info",children:"Assigned to: "}),Object(n.jsx)("strong",{className:"text-dark",children:e.assignedTo.name})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{className:"text-info",children:"Created on: "}),"".concat(M(e.createdAt)," | ").concat(z(e.createdAt))]})]})}))]})},W=function(){var e=g()?g().name.split(" "):[],t=Object(c.useState)([]),a=Object(E.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)([]),l=Object(E.a)(i,2),j=l[0],d=l[1],b=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/recipes/bookmarked"));case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/tasks/high"));case 2:t=e.sent,a=t.data,d(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b(),u()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.a,{children:Object(n.jsxs)(_.a,{variant:"secondary",className:"my-4",children:[Object(n.jsx)(_.a.Heading,{children:Object(n.jsxs)("h1",{className:"my-4 text-center",children:["Welcome"," ",g()?Object(n.jsxs)("span",{className:"text-success",children:[e[0]," "]}):Object(n.jsx)("span",{className:"text-danger",children:"Stranger "})]})}),Object(n.jsx)("hr",{}),!g()&&Object(n.jsxs)("h3",{className:"text-center",children:["Please"," ",Object(n.jsx)(O.LinkContainer,{to:"/login",children:Object(n.jsx)("em",{className:"text-info home-link",children:"login"})})," ","or"," ",Object(n.jsx)(O.LinkContainer,{to:"/register",children:Object(n.jsx)("em",{className:"text-success home-link",children:"register"})})," ","to fully enjoy ",Object(n.jsx)("strong",{children:"Chef Helper"})," App!"]}),g()&&"admin"===g().role&&Object(n.jsx)(U,{}),g()&&"user"===g().role&&Object(n.jsx)(B,{})]})}),Object(n.jsxs)(o.a,{className:"my-3",children:[s.length>0&&Object(n.jsx)(F,{recipes:s}),j.length>0&&Object(n.jsx)(q,{tasks:j})]})]})},J=a(27),Q=a(358),Y=a(195),K=function(e){var t=e.children;return Object(n.jsx)(o.a,{children:Object(n.jsx)(w.a,{className:"justify-content-md-center my-auto",children:Object(n.jsx)(k.a,{xs:12,md:6,children:t})})})},V=a(10),$=(a(30),function(e){e.location,e.history;var t=Object(c.useState)({email:"",password:"",buttonText:"Login"}),a=Object(E.a)(t,2),s=a[0],r=a[1],i=s.email,o=s.password,d=s.buttonText,b=function(e){return function(t){console.log(t.target.value),r(Object(C.a)(Object(C.a)({},s),{},Object(J.a)({},e,t.target.value)))}};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(K,{children:[Object(n.jsx)(V.a,{}),g()?Object(n.jsx)(j.c,{to:"/"}):null,Object(n.jsx)("h1",{className:"text-center",children:"Please login"}),Object(n.jsxs)(Q.a,{className:"border border-secondary p-3 my-4 rounded",onSubmit:function(e){e.preventDefault(),r(Object(C.a)(Object(C.a)({},s),{},{buttonText:"Checking..."})),G()({method:"POST",url:"".concat("http://localhost:8000/api","/login"),data:{email:i,password:o}}).then((function(e){f(e,(function(){r(Object(C.a)(Object(C.a)({},s),{},{email:"",password:""})),V.b.success("Hi ".concat(e.data.user.name,", Welcome back!"))}))})).catch((function(e){console.log("SIGNUP ERROR",e.response.data),r(Object(C.a)(Object(C.a)({},s),{},{buttonText:"Submit"})),V.b.error(e.response.data.error)}))},children:[Object(n.jsxs)(Q.a.Group,{controlId:"email",children:[Object(n.jsx)(Q.a.Label,{children:"Email Address"}),Object(n.jsx)(Q.a.Control,{type:"email",placeholder:"Enter Email",onChange:b("email")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"password",children:[Object(n.jsx)(Q.a.Label,{children:"Password"}),Object(n.jsx)(Q.a.Control,{type:"password",placeholder:"Enter password",onChange:b("password")})]}),Object(n.jsx)(Y.a,{type:"submit",variant:"success",children:d})]})]}),Object(n.jsx)(w.a,{className:"py-3 text-center",children:Object(n.jsxs)(k.a,{children:["New User?"," ",Object(n.jsx)(l.Link,{className:"text-danger",to:"/register",children:Object(n.jsx)("strong",{children:Object(n.jsx)("em",{children:"Register"})})})]})})]})}),X=function(e){e.location,e.history;var t=Object(c.useState)({name:"",email:"",password:"",confirmPassword:"",buttonText:"Submit"}),a=Object(E.a)(t,2),s=a[0],r=a[1],i=s.name,o=s.email,l=s.password,j=s.confirmPassword,d=s.buttonText,b=function(e){return function(t){console.log(t.target.value),r(Object(C.a)(Object(C.a)({},s),{},Object(J.a)({},e,t.target.value)))}};return Object(n.jsxs)(K,{children:[Object(n.jsx)("h1",{className:"text-center",children:"Please Register"}),Object(n.jsx)(V.a,{}),Object(n.jsxs)(Q.a,{className:"border border-secondary p-3 my-4 rounded",onSubmit:function(e){e.preventDefault(),r(Object(C.a)(Object(C.a)({},s),{},{buttonText:"Submitting"})),G()({method:"POST",url:"".concat("http://localhost:8000/api","/signup"),data:{name:i,email:o,password:l}}).then((function(e){r(Object(C.a)(Object(C.a)({},s),{},{name:"",email:"",password:"",buttonText:"Submited"})),V.b.success(e.data.message)})).catch((function(e){console.log("SIGNUP ERROR",e.response.data),r(Object(C.a)(Object(C.a)({},s),{},{buttonText:"Submit"})),V.b.error(e.response.data.error)}))},children:[Object(n.jsxs)(Q.a.Group,{controlId:"name",children:[Object(n.jsx)(Q.a.Label,{children:"Name"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Enter name",value:i,onChange:b("name")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"email",children:[Object(n.jsx)(Q.a.Label,{children:"Email Address"}),Object(n.jsx)(Q.a.Control,{type:"email",placeholder:"Enter Email",value:o,onChange:b("email")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"password",children:[Object(n.jsx)(Q.a.Label,{children:"Password"}),Object(n.jsx)(Q.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:b("password")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"confirmPassword",children:[Object(n.jsx)(Q.a.Label,{children:"Confirm Password"}),Object(n.jsx)(Q.a.Control,{type:"password",placeholder:"Confirm password",value:j,onChange:b("confirmPassword")})]}),Object(n.jsx)(Y.a,{type:"submit",variant:"success",children:d})]}),Object(n.jsx)(w.a,{className:"py-3"})]})},Z=a(353),ee=a(197),te=a(361),ae=a(362);var ne=function(e){var t=e.recipe;return Object(n.jsxs)(te.a,{className:"my-3 rounded",children:[Object(n.jsx)(te.a.Img,{variant:"top",src:t.image}),Object(n.jsxs)(te.a.Body,{children:[Object(n.jsx)(te.a.Title,{children:t.label}),Object(n.jsx)(te.a.Text,{children:t.healthLabels.map((function(e,t){return Object(n.jsx)(H.a,{variant:"success",className:"m-1",children:e},t)}))}),Object(n.jsx)(te.a.Text,{children:Object(n.jsx)(ae.a,{children:t.ingredients.map((function(e,t){return Object(n.jsx)(ae.a.Item,{children:e.text},t)}))})}),Object(n.jsx)(O.LinkContainer,{to:"recipes/".concat(t._id),children:Object(n.jsx)(Y.a,{variant:"warning",children:"View Details"})})]})]})},ce=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/recipes"));case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(c.useState)(""),o=Object(E.a)(i,2),l=o[0],j=o[1],d=Object(c.useState)([]),b=Object(E.a)(d,2),u=b[0],h=b[1];return Object(c.useEffect)((function(){r()}),[]),Object(c.useEffect)((function(){}),[u,l]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(w.a,{children:[Object(n.jsxs)(k.a,{children:[0!==u.length?Object(n.jsxs)("h1",{children:["All Recipes (",u.length,")"]}):Object(n.jsxs)("h1",{children:["All Recipes (",a.length,")"]}),0===a.length&&Object(n.jsx)("h1",{className:"text-info",children:"Please wait... loading recipes data"})]}),Object(n.jsx)(k.a,{children:Object(n.jsxs)(Z.a,{className:"mt-2",children:[Object(n.jsx)(Z.a.Prepend,{children:Object(n.jsx)(Z.a.Text,{id:"basic-addon1",children:Object(n.jsx)("i",{class:"fas fa-search"})})}),Object(n.jsx)(ee.a,{placeholder:"Search for recipes...","aria-label":"Recipe name","aria-describedby":"basic-addon1",onChange:function(e){e.preventDefault(),j(e.target.value);var t=a.filter((function(e){return e.label.toLowerCase().match(l.toLowerCase())}));h(t)}})]})})]}),Object(n.jsxs)(w.a,{children:[l.length>0?u.map((function(e,t){return Object(n.jsx)(k.a,{sm:12,md:6,lg:4,xl:3,children:Object(n.jsx)(ne,{recipe:e},e._id)})})):a.map((function(e){return Object(n.jsx)(k.a,{sm:12,md:6,lg:4,xl:3,children:Object(n.jsx)(ne,{recipe:e},e._id)})})),0===a.length&&Object(n.jsxs)("p",{className:"text-danger",children:[Object(n.jsx)("strong",{children:"Ooops!!!"})," Something went wrong... No Recipes found!"]})]})]})},se=a(354);var re=function(e){var t,a=e.recipe;return Object(n.jsxs)(o.a,{className:"my-3",children:[Object(n.jsxs)(w.a,{children:[Object(n.jsxs)(k.a,{md:4,children:[Object(n.jsx)(b.a,{src:(t=a.image,t.startsWith("uploads/")?"http://localhost:8000/".concat(t):"".concat(t)),alt:a.label,fluid:!0}),a.healthLabels.map((function(e,t){return Object(n.jsx)(H.a,{variant:"success",className:"m-1",children:e},t)}))]}),Object(n.jsx)(k.a,{md:4,children:Object(n.jsxs)(ae.a,{flush:"true",children:[Object(n.jsx)(ae.a.Item,{children:Object(n.jsx)("h3",{children:a.label})}),a.ingredients.map((function(e,t){return Object(n.jsx)(ae.a.Item,{variant:"success",children:e.text},t)}))]})}),Object(n.jsx)(k.a,{md:4,children:Object(n.jsxs)(ae.a,{flush:"true",children:[Object(n.jsx)(ae.a.Item,{children:Object(n.jsx)("h3",{children:"Weight / Pantry"})}),a.ingredients.map((function(e,t){return Object(n.jsx)(ae.a.Item,{variant:"info",className:"d-flex justify-content-between",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("strong",{children:"product: "}),Object(n.jsx)("p",{children:e.productId.name})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("strong",{children:"required: "}),Object(n.jsxs)("p",{children:[e.weight," (g)"]})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("strong",{children:"pantry: "}),Object(n.jsxs)("p",{children:[e.productId.countInStock,"(g)"]})]})]})},e._id)}))]})})]}),Object(n.jsx)(w.a,{className:"my-3",children:Object(n.jsx)(k.a,{children:Object(n.jsx)(O.LinkContainer,{to:"/recipes",children:Object(n.jsx)(Y.a,{variant:"danger",children:"Back"})})})})]})},ie=function(){var e=Object(c.useState)({}),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(E.a)(r,2),l=i[0],d=i[1],b=Object(j.m)().id;return Object(c.useEffect)((function(){(function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/recipes/").concat(b));case 2:t=e.sent,a=t.data,s(a),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)(o.a,{children:l?Object(n.jsx)(se.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(n.jsx)(re,{recipe:a})})},oe=a(19);var le=function(e){var t=e.day,a=e.employees,c=t.day,s=t.date.split(","),r=Object(oe.a)(a);return Object(n.jsxs)(te.a,{className:"my-3 rounded",border:6===t.dayId?"danger":"secondary",children:[Object(n.jsxs)(te.a.Header,{children:[Object(n.jsx)(te.a.Title,{children:Object(n.jsx)("strong",{className:"".concat(6===t.dayId?"text-danger":"text-secondary"," rota-dayCard__day"),children:c.substring(0,3)})}),"".concat(s[1],", ").concat(s[2].substring(0,5))]}),Object(n.jsx)(te.a.Body,{children:Object(n.jsx)(ae.a,{flush:"true",children:t.employees.map((function(e,t){return Object(n.jsxs)(ae.a.Item,{className:"d-flex justify-content-between",children:[Object(n.jsx)("p",{children:(a=e.nameId,r.filter((function(e){return e._id===a}))[0].name)}),Object(n.jsx)("p",{className:"text-info",children:Object(n.jsx)("strong",{children:e.start})}),Object(n.jsx)("p",{children:"\xa0|\xa0"}),Object(n.jsx)("p",{className:"text-info",children:Object(n.jsx)("strong",{children:e.finish})})]},e._id);var a}))})})]})};var je=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)([]),o=Object(E.a)(i,2),l=o[0],j=o[1],d=Object(c.useState)(!0),b=Object(E.a)(d,2),u=b[0],h=b[1],O=Object(c.useState)(!0),x=Object(E.a)(O,2),m=x[0],p=x[1],f=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/names"));case 2:(t=e.sent)?(r(t.data),h(!1)):console.log("something went wrong when fetching employees...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/rota"));case 2:(t=e.sent)?(j(t.data),p(!1)):console.log("something went wrong when fetching rota...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){f(),g()}),[]),Object(n.jsx)(n.Fragment,{children:u||m?Object(n.jsx)("p",{children:"loading data..."}):l.map((function(e){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("h3",{children:["Rota for week starting:"," ",Object(n.jsx)("strong",{className:"text-success",children:e.weekStart.substring(0,16)})]}),Object(n.jsx)(w.a,{children:e.weeklyRota.map((function(e,t){return Object(n.jsx)(k.a,{sm:12,md:6,lg:4,xl:3,children:Object(n.jsx)(le,{day:e,employees:a},e.dayId)},e.dayId+t)}))})]},e._id)}))})},de=function(){return Object(n.jsx)(o.a,{children:Object(n.jsx)(je,{})})},be=a(355),ue=a(357),he=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)([]),i=Object(E.a)(r,2),l=i[0],j=i[1],d=Object(c.useState)(0),b=Object(E.a)(d,2),u=b[0],h=b[1],O=Object(c.useState)(0),x=Object(E.a)(O,2),m=x[0],p=x[1],f=Object(c.useState)(!1),v=Object(E.a)(f,2),y=v[0],N=v[1],S=Object(c.useState)(!1),I=Object(E.a)(S,2),L=I[0],R=I[1],_=Object(c.useState)(!1),A=Object(E.a)(_,2),D=A[0],H=A[1],F=Object(c.useState)(!1),B=Object(E.a)(F,2),U=(B[0],B[1]),M=function(){return N(!1)},z=function(){return R(!1)},q=function(e){console.log(e),j((function(){return a.find((function(t){return t._id===e}))})),N(!0)},W=function(e){console.log(e),j((function(){return a.find((function(t){return t._id===e}))})),R(!0)},J=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/products"));case 2:t=e.sent,a=t.data,s(a),re();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=Object(c.useState)(1),$=Object(E.a)(K,2),X=$[0],te=($[1],Object(c.useState)(5)),ae=Object(E.a)(te,1)[0],ne=Object(c.useState)([]),ce=Object(E.a)(ne,2),se=(ce[0],ce[1]),re=function(){var e=X*ae,t=e-ae,n=a.slice(t,e);se(n)},ie=Object(c.useState)(""),oe=Object(E.a)(ie,2),le=oe[0],je=oe[1],de=Object(c.useState)([]),he=Object(E.a)(de,2),Oe=he[0],xe=he[1];return Object(c.useEffect)((function(){J()}),[]),Object(c.useEffect)((function(){}),[le,Oe]),Object(c.useEffect)((function(){D&&J()}),[D]),Object(n.jsxs)(o.a,{children:[Object(n.jsxs)(w.a,{className:"my-3",children:[Object(n.jsxs)(k.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)("h1",{children:"Pantry"})]}),Object(n.jsx)(k.a,{children:Object(n.jsxs)(Z.a,{className:"mt-2",children:[Object(n.jsx)(Z.a.Prepend,{children:Object(n.jsx)(Z.a.Text,{id:"basic-addon1",children:Object(n.jsx)("i",{className:"fas fa-search"})})}),Object(n.jsx)(ee.a,{placeholder:"Search for product...","aria-label":"Product name","aria-describedby":"basic-addon1",onChange:function(e){e.preventDefault(),je(e.target.value);var t=a.filter((function(e){return e.name.toLowerCase().match(le.toLowerCase())}));xe(t)}})]})})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsxs)(be.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(n.jsx)("thead",{className:"bg-dark text-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Quantity (grams)"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:le.length>0?Oe.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.countInStock}),g()?Object(n.jsxs)("td",{className:"text-right",children:[Object(n.jsx)(Y.a,{className:"mx-1",variant:"warning",size:"sm",onClick:function(){return q(e._id)},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),g()&&"admin"===g().role?Object(n.jsx)(Y.a,{className:"mx-1",variant:"danger",size:"sm",onClick:function(){return W(e._id)},children:Object(n.jsx)("i",{className:"fas fa-minus"})}):null]}):Object(n.jsx)("td",{children:Object(n.jsx)("p",{className:"text-danger text-small",children:Object(n.jsx)("small",{children:"Please login to see actions"})})})]},t)})):a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.countInStock}),g()?Object(n.jsxs)("td",{className:"text-right",children:[Object(n.jsx)(Y.a,{className:"mx-1",variant:"warning",size:"sm",onClick:function(){return q(e._id)},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),g()&&"admin"===g().role?Object(n.jsx)(Y.a,{className:"mx-1",variant:"danger",size:"sm",onClick:function(){return W(e._id)},children:Object(n.jsx)("i",{className:"fas fa-minus"})}):null]}):Object(n.jsx)("td",{children:Object(n.jsx)("p",{className:"text-danger text-small",children:Object(n.jsx)("small",{children:"Please login to see actions"})})})]},t)}))})]})})}),Object(n.jsxs)(ue.a,{show:y,onHide:M,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsxs)(ue.a.Title,{children:["Update quantity of"," ",Object(n.jsx)("span",{className:"text-danger",children:l.name})]})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=l.name,a=l.countInStock;e.preventDefault(),G()({method:"PATCH",url:"".concat("http://localhost:8000/api","/products/").concat(l._id),data:{name:t,countInStock:a}}).then((function(e){V.b.success("Quantity of ".concat(t," updated sucesfully!")),H(!0)})),M()},children:[Object(n.jsxs)(ue.a.Body,{children:[Object(n.jsxs)(Q.a.Group,{children:[Object(n.jsx)(Q.a.Label,{children:"Available Quantity (grams)"}),Object(n.jsx)(Q.a.Control,{type:"number",placeholder:l.countInStock,name:l.countInStock,readOnly:!0})]}),Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"Add (grams)"}),Object(n.jsx)(Q.a.Control,{type:"number",value:u,name:u,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)(Y.a,{variant:"warning",className:"btn-sm mt-1",onClick:function(e){e.preventDefault(),j(Object(C.a)(Object(C.a)({},l),{},{countInStock:Number(l.countInStock)+Number(u)})),h(0)},children:"Add"})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"Subtract (grams)"}),Object(n.jsx)(Q.a.Control,{type:"number",value:m,name:m,onChange:function(e){return p(e.target.value)}}),Object(n.jsx)(Y.a,{variant:"warning",className:"btn-sm mt-1",onClick:function(e){e.preventDefault(),j(Object(C.a)(Object(C.a)({},l),{},{countInStock:Number(l.countInStock)-Number(m)})),p(0)},children:"Subtract"})]})]})]}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"danger",onClick:M,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"success",type:"submit",children:"Update"})]})]})]}),Object(n.jsxs)(ue.a,{show:L,onHide:M,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=l._id,n=l.name;e.preventDefault(),G()({method:"DELETE",url:"".concat("http://localhost:8000/api","/products/").concat(l._id),data:{_id:t}}).then((function(e){console.log("item removed"),V.b.success("Item ".concat(n," has been deleted")),s(a.filter((function(e){return e._id!==t}))),U(!0)})),z()},children:[Object(n.jsxs)(ue.a.Body,{children:[Object(n.jsxs)("h3",{children:["Remove of ",Object(n.jsx)("span",{className:"text-danger",children:l.name})]}),Object(n.jsxs)(Q.a.Group,{children:[Object(n.jsx)(Q.a.Label,{children:"Available Quantity (grams)"}),Object(n.jsx)(Q.a.Control,{type:"number",placeholder:l.countInStock,name:l.countInStock,readOnly:!0})]})]}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:z,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"danger",type:"submit",children:"Remove"})]})]})]})]})},Oe=function(e){var t;switch(e){case"low":t="info";break;case"medium":t="warning";break;case"high":t="danger";break;default:t="success"}return t},xe=function(){var e,t=Object(c.useState)([]),a=Object(E.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)([]),l=Object(E.a)(i,2),j=l[0],d=l[1],b=Object(c.useState)([]),u=Object(E.a)(b,2),h=u[0],O=u[1],x=Object(c.useState)(!1),m=Object(E.a)(x,2),f=(m[0],m[1]),v=Object(c.useState)(!1),y=Object(E.a)(v,2),N=y[0],S=y[1],I=Object(c.useState)(!1),L=Object(E.a)(I,2),R=L[0],_=L[1],A=Object(c.useState)(!1),D=Object(E.a)(A,2),H=(D[0],D[1],Object(c.useState)(!1)),F=Object(E.a)(H,2),B=(F[0],F[1]),U=Object(c.useState)(!1),M=Object(E.a)(U,2),z=M[0],q=M[1],W=Object(c.useState)("select"),K=Object(E.a)(W,2),$=(K[0],K[1]),X=Object(c.useState)(!1),Z=Object(E.a)(X,2),ee=Z[0],te=Z[1],ae=function(){return f(!1)},ne=function(){return _(!1)},ce=function(){return q(!1)},re=function(e){e.preventDefault();var t=h._id,a=h.completed,n=h.priority;G()({method:"PATCH",url:"".concat("http://localhost:8000/api","/tasks/finished/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{completed:a,priority:n}}).then((function(e){V.b.success("Task has been completed!"),S(!0)}))},ie=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/tasks"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))}});case 2:t=e.sent,a=t.data,r(a),S(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/names"));case 2:(t=e.sent)?d(t.data):console.log("something went wrong when fetching users...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return oe(),ie(),function(){d([]),r([])}}),[]),Object(c.useEffect)((function(){ie()}),[N,ee]),Object(n.jsxs)(o.a,{children:[Object(n.jsx)(w.a,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)("h1",{children:"Jobs to-do List"})]})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsxs)(be.a,{bordered:!0,hover:!0,size:"sm",children:[Object(n.jsx)("thead",{className:"bg-dark text-light",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Job to do"}),Object(n.jsx)("th",{children:"Assigned To"}),Object(n.jsx)("th",{children:"Priority"}),Object(n.jsx)("th",{children:"Date / Time"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:s.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:e.completed?"table-success":null,children:e.taskName}),Object(n.jsx)("td",{className:e.completed?"table-success":null,children:e.assignedTo.name.split(" ")[0]}),Object(n.jsx)("td",{className:"table-".concat(Oe(e.priority)," text-center"),children:e.priority}),Object(n.jsxs)("td",{className:e.completed?"table-success":null,children:[e.createdAt.split("T")[0],Object(n.jsx)("span",{className:"text-danger",children:" | "}),e.createdAt.split("T")[1].split(".")[0]]}),g()?Object(n.jsxs)("td",{className:"d-flex",children:[Object(n.jsx)(Q.a,{inline:!0,onSubmit:re,children:Object(n.jsx)(Y.a,{disabled:!!e.completed,className:"mx-1",variant:"success",size:"sm",onClick:function(){O(Object(C.a)(Object(C.a)({},h),{},{_id:e._id,priority:"done",completed:!0}))},type:"submit",children:Object(n.jsx)("i",{className:"fas fa-check"})})}),g()&&"admin"===g().role?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Y.a,{className:"mx-1",disabled:!!e.completed,variant:"warning",size:"sm",onClick:function(){return t=e._id,O((function(){return s.find((function(e){return e._id===t}))})),q(!0),void te(!1);var t},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),Object(n.jsx)(Y.a,{className:"mx-1",variant:"danger",size:"sm",onClick:function(){return t=e._id,console.log(t),O((function(){return s.find((function(e){return e._id===t}))})),void _(!0);var t},children:Object(n.jsx)("i",{className:"fas fa-minus"})})]}):null]}):Object(n.jsx)("td",{children:Object(n.jsx)("p",{className:"text-danger text-small",children:Object(n.jsx)("small",{children:"Please login to see actions"})})})]},t)}))})]})})}),Object(n.jsxs)(ue.a,{show:R,onHide:ae,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=h._id;e.preventDefault(),G()({method:"DELETE",url:"".concat("http://localhost:8000/api","/tasks/").concat(h._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{_id:t}}).then((function(e){console.log("item removed"),V.b.success("Task has been deleted"),r(s.filter((function(e){return e._id!==t}))),B(!0)})),ne()},children:[Object(n.jsx)(ue.a.Body,{children:Object(n.jsxs)("h3",{children:["Remove of ",Object(n.jsx)("span",{className:"text-danger",children:"completed task"})]})}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:ne,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"danger",type:"submit",children:"Remove"})]})]})]}),Object(n.jsxs)(ue.a,{show:z,onHide:ae,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Edit Task"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault();var t=h._id,a=h.taskName,n=h.assignedTo,c=h.priority;G()({method:"PATCH",url:"".concat("http://localhost:8000/api","/tasks/admin/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{taskName:a,priority:c,assignedTo:n}}).then((function(e){V.b.success("Task has been updated"),te(!0),ce()}))},children:[Object(n.jsxs)(ue.a.Body,{children:[Object(n.jsxs)("h3",{children:["Task : ",Object(n.jsx)("span",{className:"text-danger",children:h.taskName})]}),Object(n.jsxs)(Q.a.Group,{controlId:"Name",children:[Object(n.jsx)(Q.a.Label,{children:"Job to do"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Task Name",onChange:(e="taskName",function(t){console.log(t.target.value),O(Object(C.a)(Object(C.a)({},h),{},Object(J.a)({},e,t.target.value))),console.log(h)}),value:h.taskName})]}),Object(n.jsxs)(Q.a.Group,{controlId:"priority",children:[Object(n.jsx)(Q.a.Label,{children:"Priority"}),Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(e){$(e.target.value),O(Object(C.a)(Object(C.a)({},h),{},{priority:e.target.value}))},value:h.priority,className:"bg-".concat(Oe(h.priority)," text-light"),children:[Object(n.jsx)("option",{className:"bg-info",value:"low",children:"Low"}),Object(n.jsx)("option",{className:"bg-warning",value:"medium",children:"Medium"}),Object(n.jsx)("option",{className:"bg-danger",value:"high",children:"High"})]})]}),0!==j.length?Object(n.jsxs)(Q.a.Group,{controlId:"assignedTo",children:[Object(n.jsx)(Q.a.Label,{children:"Assign Task to:"}),Object(n.jsx)(Q.a.Control,{as:"select",onChange:function(e){O(Object(C.a)(Object(C.a)({},h),{},{assignedTo:e.target.value}))},children:0!==j.length?j.map((function(e){return Object(n.jsx)("option",{selected:h.assignedTo,value:e._id,children:e.name},e._id)})):Object(n.jsx)("option",{className:"bg-danger text-light",children:"Error fetching users"})})]}):Object(n.jsx)(se.a,{})]}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"danger",onClick:ce,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"warning",type:"submit",children:"Update Task"})]})]})]})]})},me=a(198),pe=a.n(me),fe=function(e){var t=e.match,a=e.history,s=Object(c.useState)({name:"",token:"",show:!0}),r=Object(E.a)(s,2),i=r[0],o=r[1];Object(c.useEffect)((function(){var e=t.params.token,a=pe.a.decode(e).name;e&&o(Object(C.a)(Object(C.a)({},o),{},{name:a,token:e}))}),[t.params.token]);var l=i.name,j=i.token;i.show;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)("h1",{className:"text-center",children:["Please confirm the account activation for"," ",Object(n.jsx)("span",{className:"text-danger",children:l})," "]}),Object(n.jsx)("p",{children:"Please click button below to complete the registration process."}),Object(n.jsx)(Y.a,{onClick:function(){G()({method:"POST",url:"".concat("http://localhost:8000/api","/activate"),data:{token:j}}).then((function(e){o(Object(C.a)(Object(C.a)({},i),{},{show:!1})),V.b.success(e.data.message),setTimeout((function(){a.push("/login")}),4e3)})).catch((function(e){console.log("ACCOUNT ACTIVATION",e.response.data.error),V.b.error(e.response.data.error)}))},variant:"success",children:"Activate Account"})]})},ge=function(){var e=Object(c.useState)(!0),t=Object(E.a)(e,2),a=(t[0],t[1]),s=Object(c.useState)({_id:"",name:"",email:"",password:"",confirmPassword:"",buttonText:"Update"}),r=Object(E.a)(s,2),i=r[0],l=r[1],j=(i._id,i.name),d=i.email,b=i.password,u=i.confirmPassword,h=i.buttonText,O="Bearer ".concat(p("token")),x={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))}},m=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/profile"),x);case 2:(t=e.sent)?(l(Object(C.a)(Object(C.a)({},i),{},{_id:t.data._id,name:t.data.name,email:t.data.email,buttonText:"Update"})),a(!1)):console.log("oops! something went wrong...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m()}),[]);var f=function(e){return function(t){console.log(t.target.value),l(Object(C.a)(Object(C.a)({},i),{},Object(J.a)({},e,t.target.value)))}};return Object(n.jsxs)(o.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)("h1",{className:"my-4",children:"User Profile"}),Object(n.jsxs)("h4",{children:["You can ",Object(n.jsx)("strong",{className:"text-warning",children:"update"})," your login details"]})]})}),Object(n.jsx)(w.a,{className:"text-center text-info font-weight-bold",children:Object(n.jsxs)(Q.a,{onSubmit:function(e){if(e.preventDefault(),b!==u)return V.b.error("Both passwords don't match");l(Object(C.a)(Object(C.a)({},i),{},{buttonText:"Submitting"})),G()({method:"PUT",url:"".concat("http://localhost:8000/api","/users/profile/"),data:{name:j,email:d,password:b},headers:{"Content-Type":"application/json",Authorization:O}}).then((function(e){console.log("UPDATE PROFILE SUCCESSFUL"),function(e,t){if(console.log("UPDATE USER IN LOCAL STORAGE UTIL"),void 0!==window){var a=JSON.parse(localStorage.getItem("user"));a=e.data,localStorage.setItem("user",JSON.stringify(a))}t()}(e,(function(){V.b.success(e.data.message),l(Object(C.a)(Object(C.a)({},i),{},{buttonText:"Updated"}))}))})).catch((function(e){console.log("UPDATE PROFILE ERROR",e.response.data),V.b.error(e.response.data.error)}))},className:"border border-secondary p-3 my-4 rounded",children:[Object(n.jsxs)(Q.a.Group,{controlId:"name",children:[Object(n.jsx)(Q.a.Label,{children:"Name"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Enter name",value:j,onChange:f("name")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"email",children:[Object(n.jsx)(Q.a.Label,{children:"Email Address"}),Object(n.jsx)(Q.a.Control,{type:"email",placeholder:"Enter Email",value:d,onChange:f("email")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"password",children:[Object(n.jsx)(Q.a.Label,{children:"Password"}),Object(n.jsx)(Q.a.Control,{type:"password",placeholder:"Enter password",value:b,onChange:f("password")})]}),Object(n.jsxs)(Q.a.Group,{controlId:"confirmPassword",children:[Object(n.jsx)(Q.a.Label,{children:"Confirm Password"}),Object(n.jsx)(Q.a.Control,{type:"password",placeholder:"Confirm password",value:u,onChange:f("confirmPassword")})]}),Object(n.jsx)(Y.a,{type:"submit",variant:"warning",children:h})]})})]})},ve=function(){var e=Object(c.useState)("select"),t=Object(E.a)(e,2),a=(t[0],t[1]),s=Object(c.useState)({taskName:"",assignedTo:"",priority:"low"}),r=Object(E.a)(s,2),i=r[0],o=r[1],l=Object(c.useState)([]),j=Object(E.a)(l,2),d=j[0],b=j[1],u=Object(c.useState)({name:"",countInStock:"",price:"",defaultWeightInGrams:""}),h=Object(E.a)(u,2),O=h[0],x=h[1],m=Object(c.useState)(!0),f=Object(E.a)(m,2),v=(f[0],f[1]),y=Object(c.useState)([]),N=Object(E.a)(y,2),S=(N[0],N[1]),I=Object(c.useState)(!1),L=Object(E.a)(I,2),R=(L[0],L[1],O.name),_=O.countInStock,A=O.price,D=O.defaultWeightInGrams,H=i.taskName,F=i.assignedTo,B=i.priority,M=function(e){return function(t){console.log(t.target.value),x(Object(C.a)(Object(C.a)({},O),{},Object(J.a)({},e,t.target.value)))}},z=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/names"));case 2:(t=e.sent)?(b(t.data),v(!1)):console.log("something went wrong when fetching users...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/products"));case 2:(t=e.sent)?S(t.data):console.log("something went wrong when fetching products...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return z(),q(),function(){b([]),S([])}}),[]),Object(n.jsxs)(n.Fragment,{children:[g()&&"admin"===g().role&&Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)(U,{})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)(k.a,{children:Object(n.jsx)("h1",{className:"text-center my-3",children:"Stock and Task Management"})})]}),Object(n.jsxs)(w.a,{children:[Object(n.jsxs)(k.a,{className:"my-3",md:6,sm:12,xl:6,children:[Object(n.jsx)("h2",{className:"my-3",children:"Pantry Management"}),Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault(),x(Object(C.a)({},O)),G()({method:"POST",url:"".concat("http://localhost:8000/api","/products/"),data:{name:R,countInStock:_,price:A,defaultWeightInGrams:D}}).then((function(e){x(Object(C.a)(Object(C.a)({},O),{},{name:"",countInStock:"",price:"",defaultWeightInGrams:""})),V.b.success(e.data.message)})).catch((function(e){console.log("PRODUCT CREATE ERROR",e.response.data),x(Object(C.a)({},O)),V.b.error(e.response.data.error)}))},children:[Object(n.jsxs)(Q.a.Group,{controlId:"Name",children:[Object(n.jsx)(Q.a.Label,{children:"Product Name"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Product Name",onChange:M("name"),value:R,required:!0})]}),Object(n.jsxs)(Q.a.Group,{controlId:"quantity",children:[Object(n.jsx)(Q.a.Label,{children:"Quantity"}),Object(n.jsx)(Q.a.Control,{type:"number",step:"0.01",placeholder:"Quantity",onChange:M("countInStock"),value:_,required:!0})]}),Object(n.jsxs)(Q.a.Group,{controlId:"price",children:[Object(n.jsx)(Q.a.Label,{children:"Price"}),Object(n.jsx)(Q.a.Control,{type:"number",step:"0.01",placeholder:"Price",onChange:M("price"),value:A})]}),Object(n.jsxs)(Q.a.Group,{controlId:"weight",children:[Object(n.jsx)(Q.a.Label,{children:"Weight"}),Object(n.jsx)(Q.a.Control,{type:"number",step:"0.01",placeholder:"Weight",onChange:M("defaultWeightInGrams"),value:D,required:!0})]}),Object(n.jsx)(Y.a,{type:"submit",variant:"success",children:"Add Product"})]})]}),Object(n.jsxs)(k.a,{className:"my-3",md:6,sm:12,xl:6,children:[Object(n.jsx)("h2",{className:"my-3",children:"Tasks Assignement"}),Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault(),o(Object(C.a)(Object(C.a)({},i),{},{name:H})),G()({method:"POST",url:"".concat("http://localhost:8000/api","/tasks"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{taskName:H,assignedTo:F,priority:B}}).then((function(e){o(Object(C.a)(Object(C.a)({},i),{},{taskName:"",assignedTo:"",priority:""})),V.b.success(e.data.message)})).catch((function(e){console.log("TASK CREATE ERROR",e.response.data),o(Object(C.a)({},i)),V.b.error(e.response.data.error)}))},children:[Object(n.jsxs)(Q.a.Group,{controlId:"Name",children:[Object(n.jsx)(Q.a.Label,{children:"Job to do"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Task Name",onChange:function(e){return function(t){console.log(t.target.value),o(Object(C.a)(Object(C.a)({},i),{},Object(J.a)({},e,t.target.value))),console.log(i)}}("taskName"),value:H,required:!0})]}),Object(n.jsxs)(Q.a.Group,{controlId:"priority",children:[Object(n.jsx)(Q.a.Label,{children:"Priority"}),Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(e){a(e.target.value),o(Object(C.a)(Object(C.a)({},i),{},{priority:e.target.value}))},value:B,className:"bg-".concat(Oe(B)," text-light"),children:[Object(n.jsx)("option",{className:"bg-info",value:"low",children:"Low"}),Object(n.jsx)("option",{className:"bg-warning",value:"medium",children:"Medium"}),Object(n.jsx)("option",{className:"bg-danger",value:"high",children:"High"})]})]}),Object(n.jsxs)(Q.a.Group,{controlId:"assignedTo",children:[Object(n.jsx)(Q.a.Label,{children:"Assign Task to:"}),Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(e){o(Object(C.a)(Object(C.a)({},i),{},{assignedTo:e.target.value}))},required:!0,children:[Object(n.jsx)("option",{children:"Select user"}),0!==d.length?d.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):Object(n.jsx)("option",{className:"bg-danger text-light",children:"Error fetching users"})]})]}),Object(n.jsx)(Y.a,{type:"submit",variant:"warning",children:"Add Task"})]})]})]})]})},ye=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(E.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)([]),d=Object(E.a)(j,2),b=d[0],u=d[1],h=Object(c.useState)(!1),O=Object(E.a)(h,2),x=(O[0],O[1]),m=Object(c.useState)(!1),f=Object(E.a)(m,2),v=f[0],y=f[1],N=Object(c.useState)(!1),S=Object(E.a)(N,2),I=S[0],L=S[1],R=Object(c.useState)(!1),_=Object(E.a)(R,2),A=_[0],D=_[1],H=Object(c.useState)(!1),F=Object(E.a)(H,2),B=F[0],M=F[1],z=function(){return y(!1)},q=function(){return L(!1)},W=function(){return x(!1)},J=function(e){var t=e.target.value;u(Object(C.a)(Object(C.a)({},b),{},{role:t})),console.log(b)},K=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/"));case 2:(t=e.sent)?(s(t.data),l(!1)):console.log("something went wrong when fetching users...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return K(),function(){s([])}}),[]),Object(c.useEffect)((function(){return K(),function(){s([])}}),[A,B]),Object(n.jsxs)(n.Fragment,{children:[g()&&"admin"===g().role&&Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)(U,{})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)(k.a,{children:Object(n.jsx)("h1",{className:"text-center my-3",children:"Users Management"})})]}),Object(n.jsx)(w.a,{children:o?Object(n.jsx)(se.a,{}):Object(n.jsxs)(be.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"No"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Email"}),Object(n.jsx)("th",{children:"Added"}),Object(n.jsx)("th",{children:"Admin"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(n.jsx)("td",{children:e.createdAt}),Object(n.jsx)("td",{className:"text-center",children:"admin"===e.role?Object(n.jsx)("i",{className:"fas fa-check text-success"}):Object(n.jsx)("i",{className:"fas fa-times text-danger"})}),Object(n.jsxs)("td",{className:"text-right",children:[Object(n.jsx)(Y.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,u((function(){return a.find((function(e){return e._id===t}))})),L(!0),M(!1),void console.log(t);var t},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),Object(n.jsx)(Y.a,{variant:"danger",className:"btn-sm",onClick:function(){return t=e._id,u((function(){return a.find((function(e){return e._id===t}))})),y(!0),D(!1),void console.log(t);var t},children:Object(n.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})}),Object(n.jsxs)(ue.a,{show:v,onHide:W,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=b._id,n=b.name;e.preventDefault(),G()({method:"DELETE",url:"".concat("http://localhost:8000/api","/users/").concat(b._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{_id:t}}).then((function(e){V.b.success("User ".concat(n," has been deleted")),s(a.filter((function(e){return e._id!==t}))),D(!0)})),z(),console.log("user: ".concat(t," has been deleted"))},children:[Object(n.jsxs)(ue.a.Body,{children:[Object(n.jsxs)("h3",{children:["Account delete for"," ",Object(n.jsx)("span",{className:"text-danger",children:b.name})]}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"email",placeholder:b.email,name:b.email,readOnly:!0})})]}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:z,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"danger",type:"submit",children:"Delete"})]})]})]}),Object(n.jsxs)(ue.a,{show:I,onHide:W,animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault(),console.log("role changed");var t=b._id,a=b.role;G()({method:"PATCH",url:"".concat("http://localhost:8000/api","/users/admin/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{role:a}}).then((function(e){V.b.success("User Role has been updated"),M(!0),q()}))},children:[Object(n.jsxs)(ue.a.Body,{children:[Object(n.jsxs)("h3",{children:["Privileges change for user:"," ",Object(n.jsx)("span",{className:"text-danger",children:b.name})]}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"email",placeholder:b.email,name:b.email,readOnly:!0})}),Object(n.jsxs)(Q.a.Group,{children:[Object(n.jsx)(Q.a.Check,{type:"radio",label:"user",name:"userRoleRadio",id:"formHorizontalRadios1",value:"user",onChange:J,checked:"user"===b.role}),Object(n.jsx)(Q.a.Check,{type:"radio",label:"admin",value:"admin",name:"userRoleRadio",id:"formHorizontalRadios2",onChange:J,checked:"admin"===b.role})]})]}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:q,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"success",type:"submit",children:"Change Role"})]})]})]})]})},we=a(67),ke=a.n(we);ke.a.locale("en-gb");var Ne=function(e){var t=e.users,a=(e.setNewRotaAdded,Object(c.useState)([{dayId:"",day:"",date:"",employees:[]}])),r=Object(E.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)([{weeklyRota:[{dayId:"",day:"",date:"",employees:[]}]}]),j=Object(E.a)(l,2),d=j[0],b=j[1],u=Object(c.useState)(!1),h=Object(E.a)(u,2),O=h[0],x=h[1],m=d.weeklyRota,p=d.dayId,f=d.day,g=d.date,v=d.employees,y=function(){o([{dayId:"",day:"",date:"",employees:[]}])},w=function(e,t,a){var n=e.target,c=n.name,s=n.value,r=Object(oe.a)(i);r[t].employees[a][c]=s,o(r)};return Object(c.useEffect)((function(){O&&G()({method:"POST",url:"".concat("http://localhost:8000/api","/rota"),data:{weeklyRota:m,dayId:p,day:f,date:g,employees:v}}).then((function(e){y(),V.b.success("New Rota Created"),x(!1)})).catch((function(e){o(Object(C.a)({},i))}))}),[O]),Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault();var t={weeklyRota:[]};t.weeklyRota=Object(oe.a)(i),console.log("weekly rota saved"),b(t),x(!0)},children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)(Q.a.Row,{className:"d-flex justify-content-between",children:[Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"Week Start"}),Object(n.jsx)(Q.a.Control,{type:"date",onChange:function(e){for(var t=e.target.value,a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n=[],c=0;c<=6;c++){var s={};s.dayId=c,s.day=a[c],s.date=ke()(t).add(c,"days").format("LLLL"),s.employees=[{nameId:"",start:"",finish:""}],n.push(s)}o(n)},disabled:i.length>1&&!0})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"\xa0"}),Object(n.jsx)(Y.a,{variant:"danger",block:!0,onClick:y,disabled:1===i.length&&!0,children:"Reset"})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"\xa0"}),Object(n.jsx)(Y.a,{variant:"success",block:!0,type:"submit",disabled:i.length<2&&!0,children:"Save"})]})]}),i.length>1?i.map((function(e,a){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(Q.a.Row,{children:Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"text",placeholder:e.date,name:e.day,defaultValue:e.date,className:a>5?"bg-danger text-light":"bg-info text-light"})})},a),e.employees.map((function(a,c){return Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsx)(Q.a.Group,{children:Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(t){return w(t,e.dayId,c)},name:"nameId",required:!0,children:[Object(n.jsx)("option",{value:"",children:"Select Employee"}),0!==t.length?t.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):Object(n.jsx)("option",{className:"bg-danger text-light",children:"Error fetching users"})]})}),Object(n.jsxs)(Q.a.Group,{children:[Object(n.jsx)(Q.a.Control,{type:"text",onChange:function(t){return w(t,e.dayId,c)},placeholder:"start hh:mm",name:"start",pattern:"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",title:"HH:MM 24-hrs format",value:a.start,required:!0}),Object(n.jsx)(Q.a.Control.Feedback,{type:"invalid",children:"Please use valid HH:MM 24-hrs format."})]}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"text",name:"finish",pattern:"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",title:"HH:MM 24-hrs format",placeholder:"finish hh:mm",value:a.finish,onChange:function(t){return w(t,e.dayId,c)},required:!0})}),Object(n.jsx)(Q.a.Group,{children:e.employees.length-1===c&&Object(n.jsx)(Y.a,{className:"mx-1",block:!0,disabled:0===a.nameId.length||0===a.start.length||0===a.finish.length,onClick:function(){return function(e){var t=Object(oe.a)(i);t[e].employees.push({nameId:"",start:"",finish:""}),o(t)}(e.dayId)},variant:"success",children:Object(n.jsx)("i",{className:"fas fa-plus"})})}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Y.a,{className:"mx-1",block:!0,disabled:1===e.employees.length,onClick:function(){return function(e,t){var a=Object(oe.a)(i);a[e].employees.splice(t,1),o(a)}(e.dayId,c)},variant:"danger",children:Object(n.jsx)("i",{className:"fas fa-minus"})})})]},c)}))]},a)})):Object(n.jsx)("p",{className:"text-danger",children:"Please set week begining"})]})},Ce=function(e){var t=e.rotas,a=e.handleShowRemoveModal;return Object(n.jsxs)(be.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"No"}),Object(n.jsx)("th",{children:"Rota for week starting"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.weekStart}),Object(n.jsxs)("td",{className:"text-right",children:[Object(n.jsx)(O.LinkContainer,{to:"/rota/".concat(e._id,"/edit"),children:Object(n.jsx)(Y.a,{variant:"dark",className:"btn-sm mx-2",children:Object(n.jsx)("i",{className:"fas fa-edit"})})}),Object(n.jsx)(Y.a,{variant:"danger",className:"btn-sm",onClick:function(){return a(e._id)},children:Object(n.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})},Se=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(E.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)(!1),d=Object(E.a)(j,2),b=(d[0],d[1]),u=Object(c.useState)([]),h=Object(E.a)(u,2),O=h[0],x=h[1],m=Object(c.useState)(!0),f=Object(E.a)(m,2),v=f[0],y=f[1],N=Object(c.useState)([]),C=Object(E.a)(N,2),S=C[0],I=C[1],L=Object(c.useState)(!1),R=Object(E.a)(L,2),_=(R[0],R[1]),A=Object(c.useState)(!1),D=Object(E.a)(A,2),H=D[0],F=D[1],B=Object(c.useState)(!1),M=Object(E.a)(B,2),z=M[0],q=M[1],W=function(){return F(!1)},J=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/"));case 2:(t=e.sent)?(x(t.data),y(!1)):console.log("something went wrong when fetching users...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/rota"));case 2:(t=e.sent)?(s(t.data),l(!1)):console.log("something went wrong when fetching rota...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return J(),function(){x([]),s([])}}),[]),Object(c.useEffect)((function(){K(),console.log("submit Remove changed")}),[z,b]),Object(n.jsxs)(n.Fragment,{children:[g()&&"admin"===g().role&&Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)(U,{})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)(k.a,{children:Object(n.jsx)("h1",{className:"text-center my-3",children:"Staff Rota Management"})})]}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)("h2",{className:"text-center my-3",children:"All Rotas"}),o?Object(n.jsx)(se.a,{}):Object(n.jsx)(Ce,{rotas:a,handleShowRemoveModal:function(e){I((function(){return a.find((function(t){return t._id===e}))})),F(!0),q(!1),console.log(e)}})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)("h2",{className:"text-center my-3",children:"Rota Creator"})}),v?Object(n.jsx)(se.a,{}):Object(n.jsx)(w.a,{children:Object(n.jsx)(Ne,{users:O,setNewRottaAdded:b})}),Object(n.jsxs)(ue.a,{show:H,onHide:function(){return _(!1)},animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=S._id;e.preventDefault(),G()({method:"DELETE",url:"".concat("http://localhost:8000/api","/rota/").concat(S._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{_id:t}}).then((function(e){V.b.success("Rota has been deleted"),x(O.filter((function(e){return e._id!==t}))),q(!0)})),W()},children:[Object(n.jsx)(ue.a.Body,{children:Object(n.jsxs)("h3",{children:["Rota removal for week starting"," ",Object(n.jsx)("span",{className:"text-danger",children:S.weekStart})]})}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:W,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"danger",type:"submit",children:"Delete"})]})]})]})]})},Ie=function(e){var t=e.recipes,a=e.handleShowRemoveModal,c=e.handleClickUpdate,s=e.handleClickBookmark;return Object(n.jsxs)(be.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"No"}),Object(n.jsx)("th",{children:"Recipe"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.label}),Object(n.jsxs)("td",{className:"text-right",children:[Object(n.jsx)(Y.a,{variant:"dartk",className:"btn-sm mx-2",onClick:function(){return s(e._id)},children:e.bookmarked?Object(n.jsx)("i",{class:"fas fa-heart text-danger"}):Object(n.jsx)("i",{class:"far fa-heart text-info"})}),Object(n.jsx)(Y.a,{variant:"warning",className:"btn-sm mx-2",onClick:function(){return c(e._id)},children:Object(n.jsx)("i",{className:"fas fa-edit"})}),Object(n.jsx)(Y.a,{variant:"danger",className:"btn-sm",onClick:function(){return a(e._id)},children:Object(n.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})},Le=function(e){var t=e.handleRecipeSubmit,a=e.handleRecipeCreatorInputChange,c=e.recipeCreatorData,s=e.handleChangeProductNew,r=e.products,i=e.handleAddIngredientNew,l=(e.uploadFileHandler,e.uploading),j=(e.recipeLines,e.handleIngredientLineChangeNew),d=e.handleRemoveIngredient,u=e.handlePhotoInputChange,h=e.photoInput,O=(e.selectedPhoto,e.previewSource),x=e.deleteRecipePhoto,m=e.isUpdatingRecipe,p=e.handleRecipeUpdateSubmit,f=c.label,g=c.healthLabels,v=c.image,y=(c.ingredientLines,c.ingredients,function(e){if(!e)return"Choose Product";if(r){var t=r.filter((function(t){return t._id===e}))[0].name;return console.log(t),t}});return Object(n.jsxs)(Q.a,{onSubmit:m?p:t,className:"p-3",style:{backgroundColor:"#F2F2F2"},children:[Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsxs)(Q.a.Group,{as:k.a,controlId:"label",children:[Object(n.jsx)(Q.a.Label,{children:"Dish Name"}),Object(n.jsx)(Q.a.Control,{type:"text",onChange:a("label"),placeholder:"Dish Name",name:"label",value:f,required:!0})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,controlId:"healthLabels",children:[Object(n.jsx)(Q.a.Label,{children:"Health Labels"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Health labels, separated with comma ','",onChange:a("healthLabels"),name:"healthLabels",value:g})]})]}),Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsx)(k.a,{xs:"auto",children:Object(n.jsxs)(Q.a.Group,{controlId:"image",children:[Object(n.jsx)(Q.a.Label,{children:"Paste Image URL"}),Object(n.jsx)(Q.a.Control,{type:"text",placeholder:"Please paste url for image file",onChange:a("image"),name:"image",value:v})]})}),Object(n.jsx)(k.a,{xs:"auto",children:Object(n.jsxs)(Q.a.Group,{controlId:"photo",children:[Object(n.jsx)(Q.a.Label,{children:"Photo Upload"}),Object(n.jsx)(Q.a.File,{id:"image-file",label:"Choose File",type:"file",custom:!0,onChange:u,name:"image",value:h}),l&&Object(n.jsx)(se.a,{})]})}),Object(n.jsxs)(k.a,{xs:"auto",children:[Object(n.jsx)(b.a,{src:O?"".concat(O):v,thumbnail:!0,style:{height:"125px",width:"125px"}}),O||m?Object(n.jsx)(H.a,{className:"img-upload-delete-badge p-1",pill:!0,variant:"danger",onClick:x,children:Object(n.jsx)("i",{className:"fas fa-trash"})}):null]})]}),Object(n.jsxs)(o.a,{className:"bg-light p-3 align-items-center my-3 border border-info rounded",children:[c.ingredients.map((function(e,t){return Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsx)(Q.a.Group,{as:k.a,children:Object(n.jsx)(Q.a.Control,{type:"text",value:e.text,onChange:function(e){return j(e,t)},name:"text",required:!0})}),Object(n.jsx)(Q.a.Group,{controlId:"product",children:Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(e){return s(e,t)},children:[m&&0!==r.length?Object(n.jsx)("option",{value:e.productId,children:y(e.productId)}):Object(n.jsx)("option",{children:"Choose Product:"}),0!==r.length?r.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):Object(n.jsx)("option",{className:"bg-danger text-light",children:"Error fetching products"})]})}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"number",name:"weight",onChange:function(e){return j(e,t)},value:e.weight,required:!0})}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Y.a,{variant:"dark",className:"mx-1",disabled:0==e.text.length||null==e.weight||void 0==e.productId,onClick:i,children:Object(n.jsx)("i",{className:"fas fa-plus"})})}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Y.a,{className:"mx-1",disabled:1===c.ingredients.length,onClick:function(){return d(t)},variant:"danger",children:Object(n.jsx)("i",{className:"fas fa-minus"})})})]},t)})),Object(n.jsx)("hr",{}),m?Object(n.jsx)(Y.a,{variant:"warning",type:"submit",className:"m-2",children:"Update Recipe"}):Object(n.jsx)(Y.a,{variant:"success",type:"submit",className:"m-2",children:"Add Recipe"})]})]})};var Re=function(e){var t=e.edamamRecipes;return Object(n.jsx)(n.Fragment,{children:t.map((function(e){return Object(n.jsxs)(te.a,{style:{width:"18rem"},className:"m-1",children:[Object(n.jsx)(te.a.Img,{variant:"top",src:e.recipe.image,fluid:!0}),Object(n.jsxs)(te.a.Body,{children:[Object(n.jsx)(te.a.Title,{children:e.recipe.label}),Object(n.jsx)(ae.a,{variant:"flush",children:e.recipe.ingredientLines.map((function(e){return Object(n.jsx)(ae.a.Item,{children:e})}))})]})]})}))})},Te=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(E.a)(r,2),l=i[0],j=i[1],d=Object(c.useState)(!1),b=Object(E.a)(d,2),u=(b[0],b[1]),h=Object(c.useState)([]),O=Object(E.a)(h,2),x=O[0],m=O[1],f=Object(c.useState)(!0),v=Object(E.a)(f,2),y=v[0],N=v[1],S=Object(c.useState)([]),I=Object(E.a)(S,2),L=I[0],R=I[1],_=Object(c.useState)(!1),A=Object(E.a)(_,2),D=(A[0],A[1]),H=Object(c.useState)(!1),F=Object(E.a)(H,2),B=F[0],M=F[1],z=Object(c.useState)(!1),q=Object(E.a)(z,2),W=q[0],K=q[1],$=Object(c.useState)(!1),X=Object(E.a)($,2),te=X[0],ae=X[1],ne=function(){return M(!1)},ce=Object(c.useState)({label:"",healthLabels:[],image:"https://dummyimage.com/125x125/ccc/000",ingredientLines:[],ingredients:[{productId:"",text:"",weight:null}]}),re=Object(E.a)(ce,2),ie=re[0],le=re[1],je=Object(c.useState)([{productId:"",text:"",weight:null}]),de=Object(E.a)(je,2),be=de[0],he=de[1],Oe=Object(c.useState)(!1),xe=Object(E.a)(Oe,2),me=xe[0],pe=xe[1],fe=ie.label,ge=ie.healthLabels,ve=ie.image,ye=ie.ingredients,we=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/products"));case 2:(t=e.sent)?(N(!1),m(t.data)):console.log("something went wrong when fetching products...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/recipes"));case 2:(t=e.sent)?(s(t.data),j(!1)):console.log("something went wrong when fetching recipes...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return ae(!1),we(),function(){m([])}}),[]),Object(c.useEffect)((function(){ae(!1),ke()}),[W,u,te]);var Ne=function(){var e=Object(P.a)(T.a.mark((function e(t){var a,n,c,s,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(n=new FormData).append("image",a),pe(!0),e.prev=4,c={headers:{"Content-Type":"multipart/form-data"}},e.next=8,G.a.post("".concat("http://localhost:8000/api","/upload"),n,c);case 8:s=e.sent,r=s.data,le(Object(C.a)(Object(C.a)({},ie),{},{image:r})),pe(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),pe(!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),Ce=Object(c.useState)(""),Se=Object(E.a)(Ce,2),Te=Se[0],Pe=(Se[1],Object(c.useState)("")),Ee=Object(E.a)(Pe,2),_e=Ee[0],Ae=(Ee[1],Object(c.useState)("")),Ge=Object(E.a)(Ae,2),De=Ge[0],He=Ge[1],Fe=function(e){var t=new FileReader;t.readAsDataURL(e),e.type.match("image.*")?t.onloadend=function(){He(t.result),Be(t.result)}:V.b.error("Please choose image / photo file")},Be=function(){var e=Object(P.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:8000/api","/upload/cloudinary"),{method:"POST",body:JSON.stringify({data:t}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,V.b.success(n.msg),console.log(n.imgData),le(Object(C.a)(Object(C.a)({},ie),{},{image:n.imgData.secure_url})),pe(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),pe(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie.image.includes("https://res.cloudinary.com/uws-student/image/upload/")){e.next=3;break}return V.b.error("Image file is just link from internet. Cannot delete that. Please insert new link or upload photo."),e.abrupt("return");case 3:return t=(t=ie.image.split("/"))[7].substring(0,20),console.log(t),e.prev=6,e.next=9,fetch("".concat("http://localhost:8000/api","/upload/cloudinary/destroy"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({public_id:t})});case 9:return a=e.sent,e.next=12,a.json();case 12:n=e.sent,He(""),V.b.success(n.msg),le(Object(C.a)(Object(C.a)({},ie),{},{image:"https://dummyimage.com/125x125/ccc/000"})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(){return e.apply(this,arguments)}}(),Me=Object(c.useState)(!1),ze=Object(E.a)(Me,2),qe=ze[0],We=ze[1],Je=Object(c.useState)(""),Qe=Object(E.a)(Je,2),Ye=(Qe[0],Qe[1]),Ke=Object(c.useState)(""),Ve=Object(E.a)(Ke,2),$e=Ve[0],Xe=Ve[1],Ze=function(){var e=Object(P.a)(T.a.mark((function e(t){var a,n,c,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/recipes/update/").concat(t));case 2:return a=e.sent,n=a.data,Ye(n),e.next=7,Object(oe.a)(n.ingredients);case 7:return c=e.sent,he(c),e.next=11,{label:n.label,healthLabels:Object(oe.a)(n.healthLabels),image:n.image,ingredientLines:Object(oe.a)(n.ingredientLines),ingredients:Object(oe.a)(n.ingredients)};case 11:s=e.sent,le(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(P.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,G.a.patch("".concat("http://localhost:8000/api","/recipes/update/").concat($e),{label:fe,healthLabels:ge,image:ve,ingredients:ye},{headers:{"Content-Type":"application/json"}});case 3:(a=e.sent)?(V.b.success(a.data.message),He(""),le({label:"",healthLabels:[],image:"https://dummyimage.com/125x125/ccc/000",ingredientLines:[],ingredients:[{productId:"",text:"",weight:null}]}),We(!1),console.log("recipe update submitted")):V.b.error(a.data.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=Object(c.useState)(""),at=Object(E.a)(tt,2),nt=at[0],ct=at[1],st=Object(c.useState)([]),rt=Object(E.a)(st,2),it=rt[0],ot=rt[1],lt=Object(c.useState)(!1),jt=Object(E.a)(lt,2),dt=jt[0],bt=jt[1],ut=function(){var e=Object(P.a)(T.a.mark((function e(){var t,a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.edamam.com/search?q=".concat(t=nt,"&app_id=").concat("a1bd6451","&app_key=").concat("31f1c205b4c0de6c1b021ac04c06efe6","&from=0&to=9"),console.log("looking for... ".concat(t)),e.next=5,G.a.get("".concat(a));case 5:n=e.sent,console.log(n),n?(ot(n.data.hits),bt(!0)):(console.log("something went wrong with EDAMAM API... Please try again later"),bt(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){}),[qe,ie,te,dt]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(o.a,{children:[g()&&"admin"===g().role&&Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)(U,{})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)(k.a,{children:[Object(n.jsx)("h1",{className:"text-center my-3",children:"Recipes Management"}),Object(n.jsxs)("h4",{className:"text-center my-2",children:[Object(n.jsx)("span",{className:"text-success",children:"Create"}),","," ",Object(n.jsx)("span",{className:"text-warning",children:"Edit"}),","," ",Object(n.jsx)("span",{className:"text-danger",children:"Delete"})," or Bookmark recipes"]})]})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)("h2",{className:"text-center my-3 text-info",children:"All Recipes"})})}),Object(n.jsx)(w.a,{children:l?Object(n.jsx)(se.a,{}):Object(n.jsx)(Ie,{recipes:a,handleShowRemoveModal:function(e){R((function(){return a.find((function(t){return t._id===e}))})),M(!0),K(!1),console.log(e)},handleClickUpdate:function(e){console.log(e),Ze(e),We(!0),Xe(e)},handleClickBookmark:function(e){var t=a.filter((function(t){return t._id===e}));t=!t[0].bookmarked,G()({method:"PATCH",url:"".concat("http://localhost:8000/api","/recipes/update/bookmark/").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{bookmarked:t}}).then((function(e){V.b.success("Recipe's bookmark has changed "),ae(!0)}))}})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:Object(n.jsx)("h2",{className:"my-3 text-center text-info",children:"Recipe Creator"})})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(k.a,{children:y?Object(n.jsx)(se.a,{}):Object(n.jsx)(Le,{handleRecipeSubmit:function(e){console.log("clicked add recipe"),e.preventDefault(),G()({method:"POST",url:"".concat("http://localhost:8000/api","/recipes"),data:{label:fe,healthLabels:ge,image:ve,ingredients:ye}}).then((function(e){le(Object(C.a)(Object(C.a)({},ie),{},{label:"",healthLabels:[],image:"https://dummyimage.com/125x125/ccc/000",ingredients:[]})),he([{productId:"",text:"",weight:null}]),He(""),V.b.success(e.data.message)})).catch((function(e){console.log("RECIPE CREATE ERROR",e.response.data),le(Object(C.a)({},ie)),V.b.error(e.response.data.error)})),console.log(ie),console.log("Recipe submitted")},handleRecipeCreatorInputChange:function(e){return function(t){if("healthLabels"===e){var a=t.target.value.split(",");le(Object(C.a)(Object(C.a)({},ie),{},{healthLabels:a}))}else le(Object(C.a)(Object(C.a)({},ie),{},Object(J.a)({},e,t.target.value)))}},recipeCreatorData:ie,products:x,handleChangeProductNew:function(e,t){var a=Object(oe.a)(ie.ingredients);a[t].productId=e.target.value,le(Object(C.a)(Object(C.a)({},ie),{},{ingredients:a}))},handleAddIngredientNew:function(e){var t=Object(oe.a)(ie.ingredients),a=Object(oe.a)(ie.ingredientLines),n=ie.ingredients.map((function(e){return e.text}));a.push(n),t.push({productId:"",text:"",weight:0}),le(Object(C.a)(Object(C.a)({},ie),{},{ingredientLines:a,ingredients:t}))},recipeLines:be,setRecipeLines:he,uploading:me,uploadFileHandler:Ne,handleIngredientLineChangeNew:function(e,t){var a=e.target,n=a.name,c=a.value,s=Object(oe.a)(ie.ingredients);s[t][n]=c,le(Object(C.a)(Object(C.a)({},ie),{},{ingredients:s}))},handleRemoveIngredient:function(e){var t=Object(oe.a)(ie.ingredients);t.splice(e,1),le(Object(C.a)(Object(C.a)({},ie),{},{ingredients:t}))},handlePhotoInputChange:function(e){var t=e.target.files[0];Fe(t)},photoInput:Te,selectedPhoto:_e,previewSource:De,deleteRecipePhoto:Ue,isUpdatingRecipe:qe,handleRecipeUpdateSubmit:et})})}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)("h2",{className:"my-3 text-center text-info",children:"Need an Inspiration?"}),Object(n.jsx)("h5",{className:"text-success text-center",children:"Search over 2.5 million recipes..."}),Object(n.jsxs)("h6",{className:"text-warning text-center",children:["powered by"," ",Object(n.jsx)("a",{href:"https://www.edamam.com/",target:"_blank",children:"\xa9Edamam's"})," ","Recipe Search API"]})]})}),Object(n.jsx)(w.a,{className:"my-3",children:Object(n.jsx)(k.a,{children:Object(n.jsxs)(Z.a,{className:"mt-2",children:[Object(n.jsx)(Z.a.Prepend,{children:Object(n.jsx)(Z.a.Text,{id:"basic-addon1",children:Object(n.jsx)("i",{className:"fas fa-search"})})}),Object(n.jsx)(ee.a,{placeholder:"Search Internet for recipe or ingredient...","aria-label":"Product name","aria-describedby":"basic-addon1",onChange:function(e){e.preventDefault(),ct(e.target.value)},className:"edamam-search-input",value:nt}),nt.length>0&&Object(n.jsx)(Z.a.Append,{className:"edamam-search-reset-icon",onClick:function(){ct(""),bt(!1)},children:Object(n.jsx)(Z.a.Text,{className:"bg-danger text-light",children:Object(n.jsx)("i",{class:"far fa-times-circle"})})}),Object(n.jsx)(Y.a,{variant:"warning",type:"submit",className:"ml-2",onClick:ut,disabled:0===nt.length&&!0,children:"Search"})]})})}),Object(n.jsx)("hr",{className:"my-3 text-info",style:{width:"50%",height:"3px"}}),dt?Object(n.jsx)(w.a,{children:Object(n.jsx)(o.a,{className:"d-flex flex-wrap",children:Object(n.jsx)(Re,{className:"my-3",edamamRecipes:it})})}):null,Object(n.jsxs)(ue.a,{show:B,onHide:function(){return D(!1)},animation:!1,children:[Object(n.jsx)(ue.a.Header,{closeButton:!0,children:Object(n.jsx)(ue.a.Title,{children:"Please Confirm Removal"})}),Object(n.jsxs)(Q.a,{onSubmit:function(e){var t=L._id;e.preventDefault(),G()({method:"DELETE",url:"".concat("http://localhost:8000/api","/recipes/").concat(L._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))},data:{_id:t}}).then((function(e){V.b.success("Recipe has been deleted"),s(a.filter((function(e){return e._id!==t}))),K(!0)})),ne()},children:[Object(n.jsx)(ue.a.Body,{children:Object(n.jsxs)("h3",{children:["Recipe for"," ",Object(n.jsx)("span",{className:"text-danger",children:L.label})]})}),Object(n.jsxs)(ue.a.Footer,{children:[Object(n.jsx)(Y.a,{variant:"warning",onClick:ne,children:"Cancel"}),Object(n.jsx)(Y.a,{variant:"danger",type:"submit",children:"Delete"})]})]})]})]})})};ke.a.locale("en-gb");var Pe=function(e){var t=e.users,a=e.rota,r=e.submitEditedRota,i=Object(c.useState)(!1),l=Object(E.a)(i,2),j=l[0],d=l[1],b=Object(c.useState)([{weeklyRota:[{dayId:"",day:"",date:"",employees:[]}]}]),u=Object(E.a)(b,2),h=u[0],x=u[1],m=Object(c.useState)([{dayId:"",day:"",date:"",employees:[]}]),p=Object(E.a)(m,2),f=p[0],g=p[1],v=function(e,t,a){var n=e.target,c=n.name,s=n.value,r=Object(oe.a)(f);r[t].employees[a][c]=s,g(r)},y=function(e){var a="Select User";return e?t?a=t.filter((function(t){return t._id===e}))[0].name:void 0:a};Object(c.useEffect)((function(){g(a.weeklyRota)}),[a]);return Object(c.useEffect)((function(){console.log(f),console.log(h)}),[f,h]),Object(n.jsx)(o.a,{children:f?Object(n.jsxs)(Q.a,{onSubmit:function(e){e.preventDefault();var t={weeklyRota:[]};t.weeklyRota=Object(oe.a)(f),x(t),console.log("updated rota saved"),d(!0),V.b.success("Rota has been changed. Please click save now!")},children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)(Q.a.Row,{className:"d-flex justify-content-between",children:[Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"Week Start"}),Object(n.jsx)(Q.a.Control,{type:"date",disabled:f.length>1&&!0,value:ke()(a.weekStart).format("YYYY-MM-DD")})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"\xa0"}),Object(n.jsx)(Y.a,{variant:"warning",block:!0,type:"submit",disabled:f.length<2&&!0,children:"Update Rota"})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"\xa0"}),Object(n.jsx)(Y.a,{variant:"success",block:!0,onClick:function(){j&&r(h)},disabled:f.length<2&&!0,children:"Save"})]}),Object(n.jsxs)(Q.a.Group,{as:k.a,children:[Object(n.jsx)(Q.a.Label,{children:"\xa0"}),Object(n.jsx)(O.LinkContainer,{to:"/admin/rota",children:Object(n.jsxs)(Y.a,{variant:"danger",block:!0,children:["Cancel",Object(n.jsx)("i",{class:"fas fa-history mx-3"})]})})]})]}),f?f.map((function(e,a){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(Q.a.Row,{children:Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"text",placeholder:e.date,name:e.day,defaultValue:e.date,className:a>5?"bg-danger text-light":"bg-info text-light"})})},a),e.employees.map((function(a,c){return Object(n.jsxs)(Q.a.Row,{children:[Object(n.jsx)(Q.a.Group,{children:Object(n.jsxs)(Q.a.Control,{as:"select",onChange:function(t){return v(t,e.dayId,c)},name:"nameId",required:!0,children:[Object(n.jsx)("option",{children:y(a.nameId)}),0!==t.length?t.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):Object(n.jsx)("option",{className:"bg-danger text-light",children:"Error fetching users"})]})}),Object(n.jsxs)(Q.a.Group,{children:[Object(n.jsx)(Q.a.Control,{type:"text",onChange:function(t){return v(t,e.dayId,c)},placeholder:"start hh:mm",name:"start",pattern:"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",title:"HH:MM 24-hrs format",value:a.start,required:!0}),Object(n.jsx)(Q.a.Control.Feedback,{type:"invalid",children:"Please use valid HH:MM 24-hrs format."})]}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Q.a.Control,{type:"text",name:"finish",pattern:"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",title:"HH:MM 24-hrs format",placeholder:"finish hh:mm",value:a.finish,onChange:function(t){return v(t,e.dayId,c)},required:!0})}),Object(n.jsx)(Q.a.Group,{children:e.employees.length-1===c&&Object(n.jsx)(Y.a,{className:"mx-1",disabled:0===a.nameId.length||0===a.start.length||0===a.finish.length,onClick:function(){return function(e){var t=Object(oe.a)(f);t[e].employees.push({nameId:"",start:"",finish:""}),g(t)}(e.dayId)},variant:"success",children:Object(n.jsx)("i",{class:"fas fa-user-plus"})})}),Object(n.jsx)(Q.a.Group,{children:Object(n.jsx)(Y.a,{className:"mx-1",disabled:1===e.employees.length,onClick:function(){return function(e,t){var a=Object(oe.a)(f);a[e].employees.splice(t,1),g(a)}(e.dayId,c)},variant:"danger",children:Object(n.jsx)("i",{class:"fas fa-user-minus"})})})]},c)}))]},a)})):Object(n.jsx)("p",{className:"text-danger",children:"Fetching rota to edit"})]}):Object(n.jsx)(se.a,{})})},Ee=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(E.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)([]),b=Object(E.a)(d,2),u=b[0],h=b[1],O=Object(c.useState)(!0),x=Object(E.a)(O,2),m=x[0],f=x[1],g=Object(j.m)().id,v=a.weekStart,y=Object(c.useState)(!1),N=Object(E.a)(y,2),C=N[0],S=N[1],I=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/users/"));case 2:(t=e.sent)?(h(t.data),f(!1)):console.log("something went wrong when fetching users...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat("http://localhost:8000/api","/rota/").concat(g));case 2:(t=e.sent)?(s(t.data),l(!1)):console.log("something went wrong when fetching rota...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(P.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.weeklyRota,e.next=3,G.a.patch("".concat("http://localhost:8000/api","/rota/").concat(g),{weeklyRota:a},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p("token"))}});case 3:(n=e.sent)?(console.log(JSON.stringify(t)),V.b.success(n.data.message),S(!0)):V.b.error(n.data.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return I(),L(),function(){h([]),s([])}}),[]),Object(c.useEffect)((function(){I(),L()}),[C]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(w.a,{children:[Object(n.jsx)(V.a,{}),Object(n.jsx)(k.a,{children:Object(n.jsx)("h2",{className:"text-center my-3",children:"Rota Editor"})})]}),Object(n.jsx)(w.a,{children:o&&m?Object(n.jsx)(se.a,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{className:"my-3",children:["Edit rota for week starting on:"," ",Object(n.jsx)("span",{className:"text-success mx-2",children:v})]}),Object(n.jsx)(Pe,{rota:a,users:u,RotaId:g,submitEditedRota:R})]})})]})},_e=function(){return Object(n.jsxs)(l.BrowserRouter,{children:[Object(n.jsx)(y,{}),Object(n.jsx)(o.a,{children:Object(n.jsxs)("main",{className:"my-auto",children:[Object(n.jsx)(j.d,{path:"/",component:W,exact:!0}),Object(n.jsx)(j.d,{path:"/login",component:$,exact:!0}),Object(n.jsx)(j.d,{path:"/register",component:X,exact:!0}),Object(n.jsx)(j.d,{path:"/recipes",component:ce,exact:!0}),Object(n.jsx)(j.d,{path:"/recipes/:id",component:ie,exact:!0}),Object(n.jsx)(j.d,{path:"/rota",component:de,exact:!0}),Object(n.jsx)(j.d,{path:"/pantry",component:he,exact:!0}),Object(n.jsx)(j.d,{path:"/tasks",component:xe,exact:!0}),Object(n.jsx)(j.d,{path:"/auth/activate/:token",component:fe,exact:!0}),Object(n.jsx)(I,{path:"/profile",exact:!0,component:ge}),Object(n.jsx)(L,{path:"/admin/users",exact:!0,component:ye}),Object(n.jsx)(L,{path:"/admin/rota",exact:!0,component:Se}),Object(n.jsx)(L,{path:"/admin/recipe",exact:!0,component:Te}),Object(n.jsx)(L,{path:"/rota/:id/edit",exact:!0,component:Ee}),Object(n.jsx)(L,{path:"/admin",exact:!0,component:ve})]})}),Object(n.jsx)(N,{})]})};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(_e,{})}),document.getElementById("root"))}},[[340,1,2]]]);
//# sourceMappingURL=main.33df31e5.chunk.js.map